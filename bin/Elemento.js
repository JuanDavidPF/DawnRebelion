//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class Elemento {

    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    constructor(app, x, y, tipo) {
        this.app = app;
        this.x = x;
        this.y = y;
        this.tipo = tipo;
        this.explota = false;
        this.animacion = 0;

        this.boom = [];

        for (let i = 0; i < 5; i++) {
            this.boom[i] = this.app.loadImage("./data/Escenario/Armas/explosion" + (i + 1) + ".png");
        }

        switch (this.tipo) {

            case "Mina":

                this.ele = [];

                for (let i = 0; i < 3; i++) {
                    this.ele[i] = this.app.loadImage("./data/Escenario/Armas/mina" + (i + 1) + ".png");
                }

                this.ancho = 100;
                this.alto = 50;
                this.activada = false;
                this.y += 50 - this.alto / 2;
                this.color = this.app.color(100, 100, 230);
                break;

            case "Andamio":
                this.ele = this.app.loadImage("./data/Escenario/Armas/andamio.png");
                this.ancho = 100;
                this.alto = 35;
                this.y += 50 - this.alto / 2;
                this.color = this.app.color(100, 230, 230);
                break;

        } //cierra el switch de tipo de trampa, arma o plataforma

        this.pos = this.app.createVector(this.x, this.y);

        this.framerate = this.framerate.bind(this);
        setInterval(this.framerate, 120);


    } //cierra el constructor de Elemento

    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    pintar() {

        this.app.fill(this.color);
        this.app.imageMode(this.app.CENTER);

        switch (this.tipo) {
            case "Andamio":
                this.app.image(this.ele, this.pos.x, this.pos.y);
                break;

            case "Mina":
                if (this.animacion > 1 && this.explota == false) this.animacion = 0;
                if (this.activada == false) this.app.image(this.ele[this.animacion], this.pos.x, this.pos.y - 5);
                if (this.activada) this.app.image(this.ele[2], this.pos.x, this.pos.y);
                break;
        } //cierra el switch de tipo

        if (this.animacion > 4) this.explota = false;
        if (this.explota) {
            this.app.image(this.boom[this.animacion], this.pos.x, this.pos.y);
        }
    } //cierra el metodo pintar

    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    framerate() {

        this.animacion += 1;
    } //cierra el metodo frameRate
} //cierra la clase Elemento